/* This is the minified version of 'script.js'. View 'script.js' for development. This is for better performance. */
document.addEventListener("DOMContentLoaded",()=>{console.log("script.js loaded successfully!");let e=document.querySelector(".ham-menu"),t=document.querySelector(".off-screen-menu"),a=document.getElementById("MainContent")||document.querySelector("main"),r=t.querySelectorAll("a, button"),s=()=>{t.classList.add("active"),e.classList.add("active"),e.setAttribute("aria-expanded","true"),a&&a.setAttribute("aria-hidden","true"),r.length>0&&r[0].focus()},n=()=>{t.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false"),a&&a.setAttribute("aria-hidden","false"),e.focus()};if(e.addEventListener("click",()=>{let t="true"===e.getAttribute("aria-expanded");t?n():s()}),a&&a.addEventListener("click",()=>{t.classList.contains("active")&&n()}),document.addEventListener("keydown",e=>{if("Escape"===e.key&&t.classList.contains("active")&&n(),"Tab"===e.key&&t.classList.contains("active")){let a=document.activeElement,s=r[0],i=r[r.length-1];e.shiftKey?a===s&&(i.focus(),e.preventDefault()):a===i&&(s.focus(),e.preventDefault())}}),document.getElementById("map")){let i=document.getElementById("map"),o=document.getElementById("loading-state"),l=document.getElementById("error-state");function c(){return new Promise((e,t)=>{if("undefined"!=typeof google&&google.maps){e(google.maps);return}let a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_HERE&loading=async&callback=initMapPlaceholder",a.async=!0,a.defer=!0,a.onload=()=>{e(google.maps)},a.onerror=e=>{console.error("Error loading Google Maps API:",e),t(Error("Failed to load Google Maps. Please check your API key and/or network connection."))},document.head.appendChild(a)})}async function d(){try{o.style.display="none",l.style.display="none";let{Map:e}=await google.maps.importLibrary("maps"),t={center:{lat:60.3042,lng:10.63595},zoom:8,mapId:"YOUR_MAP_ID_HERE"},a=new e(i,t),{AdvancedMarkerElement:r}=await google.maps.importLibrary("marker");new r({position:t.center,map:a,title:"Braastad Gaard"}),console.log("Google Map initialized successfully!")}catch(s){console.error("Error during map initialization:",s),l.textContent=`Error initializing map: ${s.message}`,l.style.display="block",i.style.display="none"}}window.initMapPlaceholder=()=>{d()},(async()=>{o.style.display="block";try{await c()}catch(e){console.error("Critical error before map initialization:",e),o.style.display="none",l.textContent=`Critical error: ${e.message}`,l.style.display="block",i.style.display="none"}})()}if(document.getElementById("chatMessages")){let u=document.getElementById("chatMessages"),p=document.getElementById("messageInput"),y=document.getElementById("sendMessage"),m=document.getElementById("statusMessage"),g=`
        You are a helpful and friendly customer service chatbot named FRAM for Fram.
        Fram is a fictional circular service based in Norway that specializes in high-quality, ethically sourced, organic produce.

        Our Products:
        - Oats: Hearty and wholesome, our organic oats are perfect for a nourishing breakfast or baking. Price: 16 kr/kg.
        - Red Onions: Our vibrant organic red onions offer a crisp texture and a sweet, pungent flavor ideal for any dish. Price: 45 kr/kg.
        - Garlic: Potent and aromatic, our organic garlic bulbs are essential for adding depth to your cooking. Price: 38 kr/kg.
        - Potatoes: Versatile and nutritious, our organic potatoes are sustainably grown and perfect for roasting, mashing, or baking. Price: 32 kr/kg.
        - Carrots: Sweet and crunchy, our organic carrots are packed with flavor and make a healthy addition to any meal. Price: 48 kr/kg.
        - New produce is added continuously as time goes by and the seasons change. Customers can stay updated by signing up for our newsletter.

        Ordering and Shipping:
        - We currently only deliver in Norway.
        - Shipping is free!
        - Orders are typically processed within 1-2 business days and delivered within 3-7 business days depending on destination.
        - Customers can keep the containers that the produce is stored in. If they later want a refill, they can scan the QR code on the container to instantly add the items back to their cart. When we deliver a new order, the customer can leave their empty containers outside, and we will pick them up, clean them thoroughly, and reuse them for further deliveries.

        Return Policy:
        - We offer a 30-day return policy for unopened and unused products, starting from the date of delivery.
        - A valid proof of purchase (receipt or order number) is required for all returns.
        - Customers are responsible for return shipping costs unless the product is defective or incorrect.
        - To initiate a return, please contact our customer service.

        Customer Service Contact:
        - Email: info@framsorganic.com
        - Phone: +47 123 45 678 (fictional)

        Always prioritize providing information based ONLY on the details provided here. If a question is outside this scope, politely state that you cannot answer.
        `,h=[];function f(e,t){if("user"===t){let a=document.createElement("div");a.classList.add("message","user-message"),a.textContent=e,u.appendChild(a)}else if("bot"===t){let r=document.createElement("div");r.classList.add("bot-message-wrapper");let s=document.createElement("span");s.classList.add("bot-logo-text"),s.textContent="FRAM";let n=document.createElement("div");n.classList.add("message","bot-message-bubble"),n.textContent=e,r.appendChild(s),r.appendChild(n),u.appendChild(r)}requestAnimationFrame(()=>{u.scrollTop=u.scrollHeight})}function b(e,t=!1){m.textContent=e,m.className=`status-message ${t?"error-message":""}`,setTimeout(()=>{m.textContent="",m.className="status-message"},3e3)}async function v(e){f(e,"user"),h.push({role:"user",content:e}),p.value="",p.disabled=!0,y.disabled=!0,b("...");try{let t=await fetch("YOUR_OPENAI_API_ENDPOINT",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer YOUR_OPENAI_API_KEY"},body:JSON.stringify({model:"YOUR_GPT_MODEL",messages:[{role:"system",content:g},...h],max_tokens:350,temperature:.7})});if(!t.ok){let a=await t.json();console.error("OpenAI API Error:",a);let r="An unexpected error occurred.";throw 401===t.status?r="Authentication failed. Please check your API key.":t.status>=500?r="Server error. Please try again later.":a&&a.error&&a.error.message&&(r=`API Error: ${a.error.message}`),Error(r)}let s=await t.json(),n=s.choices[0].message.content.trim();f(n,"bot"),h.push({role:"assistant",content:n}),b("Response received.")}catch(i){console.error("Fetch error:",i),f(`${i.message}`,"bot"),b(`${i.message}`,!0)}finally{p.disabled=!1,y.disabled=!1,p.focus()}}y.addEventListener("click",()=>{let e=p.value.trim();e&&v(e)}),p.addEventListener("keydown",e=>{if("Enter"===e.key&&!e.shiftKey){e.preventDefault();let t=p.value.trim();t&&v(t)}}),f("What can I help you with today?","bot")}});