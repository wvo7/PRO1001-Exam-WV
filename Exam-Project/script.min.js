/* This is the minified version of 'script.js'. View 'script.js' for development. This is for better performance. */
document.addEventListener("DOMContentLoaded",()=>{console.log("script.js loaded successfully!");let e=document.querySelector(".ham-menu"),t=document.querySelector(".off-screen-menu"),a=document.getElementById("MainContent")||document.querySelector("main"),s=t.querySelectorAll("a, button"),r=()=>{t.classList.add("active"),e.classList.add("active"),e.setAttribute("aria-expanded","true"),a&&a.setAttribute("aria-hidden","true"),s.length>0&&s[0].focus()},n=()=>{t.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false"),a&&a.setAttribute("aria-hidden","false"),e.focus()};if(e.addEventListener("click",()=>{let t="true"===e.getAttribute("aria-expanded");t?n():r()}),a&&a.addEventListener("click",()=>{t.classList.contains("active")&&n()}),document.addEventListener("keydown",e=>{if("Escape"===e.key&&t.classList.contains("active")&&n(),"Tab"===e.key&&t.classList.contains("active")){let a=document.activeElement,r=s[0],i=s[s.length-1];e.shiftKey?a===r&&(i.focus(),e.preventDefault()):a===i&&(r.focus(),e.preventDefault())}}),document.getElementById("map")){let i=document.getElementById("map"),l=document.getElementById("loading-state"),o=document.getElementById("error-state");function d(){return new Promise((e,t)=>{if("undefined"!=typeof google&&google.maps){e(google.maps);return}let a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_HERE&loading=async&callback=initMapPlaceholder",a.async=!0,a.defer=!0,a.onload=()=>{e(google.maps)},a.onerror=e=>{console.error("Error loading Google Maps API:",e),t(Error("Failed to load Google Maps. Please check your API key and/or network connection."))},document.head.appendChild(a)})}async function c(){try{l.style.display="none",o.style.display="none";let{Map:e}=await google.maps.importLibrary("maps"),t={center:{lat:60.3042,lng:10.63595},zoom:8,mapId:"YOUR_MAP_ID_HERE"},a=new e(i,t),{AdvancedMarkerElement:s}=await google.maps.importLibrary("marker");new s({position:t.center,map:a,title:"Braastad Gaard"}),console.log("Google Map initialized successfully!")}catch(r){console.error("Error during map initialization:",r),o.textContent=`Error initializing map: ${r.message}`,o.style.display="block",i.style.display="none"}}window.initMapPlaceholder=()=>{c()},(async()=>{l.style.display="block";try{await d()}catch(e){console.error("Critical error before map initialization:",e),l.style.display="none",o.textContent=`Critical error: ${e.message}`,o.style.display="block",i.style.display="none"}})()}if(document.getElementById("chatMessages")){let p=document.getElementById("chatMessages"),m=document.getElementById("messageInput"),y=document.getElementById("sendMessage"),u=document.getElementById("statusMessage"),g=[];function E(e,t){if("user"===t){let a=document.createElement("div");a.classList.add("message","user-message"),a.textContent=e,p.appendChild(a)}else if("bot"===t){let s=document.createElement("div");s.classList.add("bot-message-wrapper");let r=document.createElement("span");r.classList.add("bot-logo-text"),r.textContent="FRAM";let n=document.createElement("div");n.classList.add("message","bot-message-bubble"),n.textContent=e,s.appendChild(r),s.appendChild(n),p.appendChild(s)}requestAnimationFrame(()=>{p.scrollTop=p.scrollHeight})}function f(e,t=!1){u.textContent=e,u.className=`status-message ${t?"error-message":""}`,setTimeout(()=>{u.textContent="",u.className="status-message"},3e3)}async function h(e){E(e,"user"),g.push({role:"user",content:e}),m.value="",m.disabled=!0,y.disabled=!0,f("...");try{let t=await fetch("YOUR_OPENAI_API_ENDPOINT",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer YOUR_OPENAI_API_KEY"},body:JSON.stringify({model:"YOUR_GPT_MODEL",messages:g,max_tokens:150,temperature:.7})});if(!t.ok){let a=await t.json();console.error("OpenAI API Error:",a);let s="An unexpected error occurred.";throw 401===t.status?s="Failed to connect. Wait and try again later.":t.status>=500?s="Server error. Please try again later.":a&&a.error&&a.error.message&&(s=`API Error: ${a.error.message}`),Error(s)}let r=await t.json(),n=r.choices[0].message.content.trim();E(n,"bot"),g.push({role:"assistant",content:n}),f("Response received.")}catch(i){console.error("Fetch error:",i),E(`${i.message}`,"bot"),f(`${i.message}`,!0)}finally{m.disabled=!1,y.disabled=!1,m.focus()}}y.addEventListener("click",()=>{let e=m.value.trim();e&&h(e)}),m.addEventListener("keydown",e=>{if("Enter"===e.key&&!e.shiftKey){e.preventDefault();let t=m.value.trim();t&&h(t)}}),E("What can I help you with today?","bot")}});